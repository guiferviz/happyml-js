var module=module||{};module.exports=module.exports||{},module.exports=function(t){return t.version="0.0.1",t.greet=function(){console.log("Those about to learn we salute you :)")},t}({}),module.exports=function(t){var e=function(){if(arguments[0]instanceof e)this._initCopy(arguments[0],arguments[1]);else if(arguments[0]instanceof Array)this._initFromData(arguments[0]);else if("number"==typeof arguments[0])this._initFromShape(arguments);else{var t=arguments[0]||{};t.data?(this._initFromData(t.data),t.shape&&this._reshapeThis(t.shape)):t.shape?this._initFromShape(t.shape):this._initVoid()}};return e.range=function(t,a,i){void 0==a&&(a=t,t=0),i=i||1;for(var s=Math.abs((a-t)/i),n=new e(s),r=0,o=t;r<s;++r,o+=i)n._data[r]=o;return n},e.linspace=function(t,a,i){i=i||10;for(var s=Math.abs((a-t)/i),n=new e(i+1),r=0,o=t;r<=i;++r,o+=s)n._data[r]=o;return n._data[i]=a,n},e.prototype._initVoid=function(){this._data=null,this._size=0,this._shape=[],this._ndims=0,this._increments=[],this._offset=0},e.prototype._initCopy=function(t,e){if(this._size=t._size,this._shape=t._shape.slice(),this._ndims=t._ndims,this._increments=t._increments.slice(),this._offset=t._offset,e){this._data=new Float64Array(this._size);var a=0,i=new Array(t._ndims).fill(0),s=t._offset;do{this._data[a++]=t._data[s]}while(-1!=(s=t.next(i,s)))}else this._data=t._data},e.prototype._initFromShape=function(t){for(var e=t.length,a=new Array(e),i=e-1;i>=0;i--){var s=t[i];if(s<=0)throw new Error("Dimension must be positive");a[i]=s}this._offset=0,this._setShape(a),this._data=new Float64Array(this._size)},e.prototype._initFromData=function(t){this._shape=new Array(0);var e=[],a=[];this._parseData(t,e,a,0),this._setShape(a),this._offset=0,this._data=new Float64Array(e)},e.prototype._parseData=function(t,e,a,i){if("number"!=typeof t){if(a.length<=i)a.push(t.length);else if(a[i]!=t.length)throw new Error("Dimensions at the same level must match");for(var s=0;s<t.length;++s)this._parseData(t[s],e,a,i+1)}else e.push(t)},e.prototype._setShape=function(t){for(var e=1,a=t.length,i=new Array(a),s=a-1;s>=0;s--)i[s]=e,e*=t[s];this._shape=t,this._ndims=a,this._size=0==a?0:e,this._increments=i},e.prototype.getSize=function(){return this._size},e.prototype.getNumDims=function(){return this._ndims},e.prototype.getShape=function(){return this._shape.slice()},e.prototype.set=function(){var t=this._toIndex(arguments);this._data[t]=arguments[arguments.length-1]},e.prototype.get=function(){var t=this._toIndex(arguments);return this._data[t]},e.prototype.slice=function(){return this._slice(arguments)},e.prototype._slice=function(t){for(var a=new e,i=[],s=[],n=1,r=0,o=0;o<this._ndims;++o)o>=t.length||-1==t[o]?(n*=this._shape[o],i.push(this._shape[o]),s.push(this._increments[o])):r+=t[o]*this._increments[o];return a._data=this._data,a._size=n,a._shape=i,a._ndims=i.length,a._increments=s,a._offset=r,a},e.prototype.toIndex=function(){return this._toIndex(arguments)},e.prototype._toIndex=function(t){for(var e=this._offset,a=this._ndims-1;a>=0;a--)e+=this._increments[a]*t[a];return e},e.prototype.toCoordinates=function(t){for(var e=new Array(this._ndims),a=0;a<this._ndims;++a){var i=Math.floor(t/this._increments[a]);e[a]=i,t-=i*this._increments[a]}return e},e.prototype.transpose=function(){var t=new e(this,!1);return t._shape.reverse(),t._increments.reverse(),t},e.prototype.next=function(t,e){for(var a=this._ndims-1;a>=0;--a)if(-1!=t[a]){if(++t[a]!=this._shape[a])return e+this._increments[a];if(t[a]=0,!(a>0))return-1;e-=this._increments[a]*(this._shape[a]-1)}return-1},e.prototype.reshape=function(){return this._reshape(arguments)},e.prototype._reshape=function(t){var e=this.copy(),a=this._checkShape(t);return e._setShape(a),e},e.prototype._reshapeThis=function(t){var e=this._checkShape(t);this._setShape(e)},e.prototype._checkShape=function(t){for(var e=-1,a=1,i=t.length,s=new Array(i),n=i-1;n>=0;--n)if(-1==t[n]){if(-1!=e)throw new Error("More than one inferred dimension");e=n}else s[n]=t[n],a*=t[n];if(-1!=e){var r=this._size/a;a=this._size,s[e]=r}if(a!=this._size)throw new Error("Size must be the same after reshape");return s},e.prototype.flatten=function(){var t=this.deepcopy();return t._shape=[this._size],t},e.prototype.toString=function(){var t=new Array(this._ndims).fill(0),e=this._offset;return this._toString(0,t,e,"\n ").value},e.prototype._toString=function(t,e,a,i){if(t==this._ndims)return{idx:this.next(e,a),value:this._data[a]};for(var s="[",n=this._shape[t],r=0;r<n;r++){var o=this._toString(t+1,e,a,i+" ");a=o.idx,s+=o.value,r!=n-1&&(t<this._ndims-1?s+=","+i:s+=", ")}return s+="]",{idx:a,value:s}},e.prototype.print=function(){console.log(this.toString())},e.prototype.deepcopy=function(){return new e(this,!0)},e.prototype.copy=function(){return new e(this,!1)},e.prototype.add=function(t){return this.apply2(t,function(t,e){return t+e})},e.prototype.sub=function(t){return this.apply2(t,function(t,e){return t-e})},e.prototype.mul=function(t){return this.apply2(t,function(t,e){return t*e})},e.prototype.apply=function(t){var a=new e({shape:this._shape}),i=0,s=new Array(this._ndims).fill(0),n=this._offset;do{a._data[i++]=t(this._data[n])}while(-1!=(n=this.next(s,n)));return a},e.prototype.apply2=function(t,a){var i=new e({shape:this._shape}),s=0,n=new Array(this._ndims).fill(0),r=this._offset,o=new Array(t._ndims).fill(0),p=t._offset;do{i._data[s++]=a(this._data[r],t._data[p])}while(-1!=(r=this.next(n,r))&&-1!=(p=t.next(o,p)));return i},e.prototype.dot=function(t){var a=this._ndims-1,i=t._ndims-2>=0?t._ndims-2:0,s=this._increments[a],n=t._increments[i];console.assert(this._shape[a]==t._shape[i]);for(var r=[],o=0;o<a;++o)r.push(this._shape[o]);for(o=0;o<i;++o)r.push(t._shape[o]);i+1<t._ndims&&r.push(t._shape[i+1]),0==r.length&&r.push(1);var p=new e({shape:r}),l=0,h=new Array(this._ndims).fill(0);h[a]=-1;var c=this._offset,d=new Array(t._ndims).fill(0);d[i]=-1;do{var m=t._offset;do{var f=0,u=c,y=m;for(o=0;o<this._shape[a];++o)f+=this._data[u]*t._data[y],u+=s,y+=n;p._data[l++]=f}while(-1!=(m=t.next(d,m)))}while(-1!=(c=this.next(h,c)));return p},t.Tensor=e,t}(module.exports),module.exports=function(t){function e(t){(t=t||{}).xmin=s(t.xmin,p.xmin),t.xmax=s(t.xmax,p.xmax),t.ymin=s(t.ymin,p.ymin),t.ymax=s(t.ymax,p.ymax),o.limits=t,o.xScale=d3.scaleLinear().domain([t.xmin,t.xmax]).range([0,o.canvasWidth]),o.yScale=d3.scaleLinear().domain([t.ymax,t.ymin]).range([0,o.canvasHeight])}function a(){o.gX.selectAll("line").attr("stroke","#CCC").filter(function(t){return 0==t}).attr("stroke","black"),o.gY.selectAll("line").attr("stroke","#CCC").filter(function(t){return 0==t}).attr("stroke","black")}function i(t,e){return"translate("+t+","+e+")"}function s(t,e){return void 0!==t?t:e}function n(t){return"happyml-layer-"+t+"-"+o.ids[t]++}function r(t,a){if(t=t.flatten()._data,a=a.flatten()._data,void 0==o.limits){var i={};i.xmin=d3.min(t),i.xmax=d3.max(t),i.ymin=d3.min(a),i.ymax=d3.max(a),e(i)}return{x:t,y:a}}var o={parent:null,margin:void 0,width:400,height:400,limits:void 0,tooltip:void 0,color:void 0,ids:{line:0,scatter:0}},p={xmin:-1,xmax:1,ymin:-1,ymax:1},l={top:0,left:0,right:0,bottom:0};return"undefined"==typeof d3&&["https://d3js.org/d3.v4.js"].forEach(function(t){var e=document.createElement("script");e.src=t,e.async=!1,document.head.appendChild(e)}),t.plot={ctx:o,init:function(t,n){t="string"==typeof t?d3.select(t):t;var r=(n=n||{}).width||o.width,p=n.height||o.height,h=n.margin;return h.left=s(h.left,l.left),h.right=s(h.right,l.right),h.top=s(h.top,l.top),h.bottom=s(h.bottom,l.bottom),n.padding||o.padding,n.limits,o.color=d3.schemeCategory10,o.parent=t,o.margin=h,o.width=r,o.height=p,o.canvasWidth=r-h.left-h.right,o.canvasHeight=p-h.top-h.bottom,o.svg=t.append("svg").attr("width",o.width).attr("height",o.height).style("user-select","none").style("background-color","white"),function(t){if(t.xlabel||t.ylabel||t.title){if(o.labelLayer=o.svg.append("g").attr("id","happyml-labels"),t.xlabel&&o.labelLayer.append("text").attr("id","happyml-label-x").text(t.xlabel).attr("x",o.margin.left+o.canvasWidth/2).attr("y",o.margin.top+o.canvasHeight).attr("dy","1.5em").style("text-anchor","middle"),t.ylabel){var e=o.margin.left,a=o.margin.top+o.canvasHeight/2;o.labelLayer.append("text").attr("id","happyml-label-y").text(t.ylabel).attr("x",e).attr("y",a).attr("dy","-1em").attr("transform",function(t,e,a){return e=s(e,0),a=s(a,0),"rotate("+t+", "+e+", "+a+")"}(-90,e,a)).style("text-anchor","middle")}t.title&&o.labelLayer.append("text").attr("id","happyml-title").text(t.title).attr("x",o.margin.left+o.canvasWidth/2).attr("y",o.margin.top).attr("dy","-0.5em").style("text-anchor","middle")}o.svg.append("foreignObject").html('<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span></span></span>').attr("x",0).attr("y",0).attr("width",100).attr("height",100)}(n),o.tooltip=d3.select("body").append("div").attr("class","happyml-tooltip").style("position","absolute").style("visibility","hidden").style("background-color","rgba(255,255,255,0.8)").style("padding","3px").style("border-radius","3px"),o.mask=o.svg.append("defs").append("clipPath").attr("id","happyml-plots-mask").style("pointer-events","none").append("rect").attr("x",0).attr("y",0).attr("width",o.canvasWidth).attr("height",o.canvasHeight),o.canvas=o.svg.append("g").attr("id","happyml-canvas").attr("transform",i(o.margin.left,o.margin.top)),e(n.limits),o.xAxis=d3.axisBottom(o.xScale).ticks(5).tickSize(o.canvasHeight),o.yAxis=d3.axisLeft(o.yScale).ticks(5).tickSize(o.canvasWidth),o.axisLayer=o.canvas.append("g").attr("class","happyml-axis"),o.gX=o.axisLayer.append("g").attr("class","happyml-axis-x").call(o.xAxis),o.gY=o.axisLayer.append("g").attr("class","happyml-axis-y").attr("transform",i(o.canvasWidth,0)).call(o.yAxis),a(),o.zoom=d3.zoom().scaleExtent([.25,4]).on("zoom",function(){o.plotLayer.attr("transform",d3.event.transform),o.plotLayer.selectAll("path").attr("stroke-width",2/d3.event.transform.k),o.plotLayer.selectAll("circle").attr("r",3/d3.event.transform.k),o.gX.call(o.xAxis.scale(d3.event.transform.rescaleX(o.xScale))),o.gY.call(o.yAxis.scale(d3.event.transform.rescaleY(o.yScale))),a()}),o.svg.call(o.zoom),o.plotLayer=o.canvas.append("g").attr("id","happyml-plots-mask").attr("clip-path","url(#happyml-plots-mask)").append("g").attr("id","happyml-plots"),o.svg},line:function(t,e){var a=r(t,e);t=a.x,e=a.y;var i=o.ids.line,s=n("line"),p=d3.line().x(function(t,e){return o.xScale(t)}).y(function(t,a){return o.yScale(e[a])});o.plotLayer.append("g").attr("id",s).attr("class","happyml-layer").append("path").datum(t).attr("fill","none").attr("stroke",o.color[i]).attr("stroke-width",2).attr("class","happyml-line").attr("d",p)},scatter:function(t,e,a){var i=r(t,e);t=i.x,e=i.y,a=a||{};var s=o.ids.scatter,p=n("scatter"),l=o.tooltip,h=o.plotLayer.append("g").attr("id",p).attr("class","happyml-layer");return h.selectAll("circle").data(t).enter().append("circle").attr("class","happyml-circle").attr("r",3).attr("cx",function(t,e){return o.xScale(t)}).attr("cy",function(t,a){return o.yScale(e[a])}).style("fill",o.color[s]).on("mouseover",function(t,a){l.style("visibility","visible").html("("+t.toFixed(2)+", "+e[a].toFixed(2)+")").style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){l.style("visibility","hidden")}),h},createScales:e},t}(module.exports);var happyml=module.exports;